<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Map Path</title>
  <link rel="stylesheet" type="text/css" href="../web_test/main.css">
  <link rel="stylesheet" type="text/css" href="./map.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey="></script>
  <script>
    
    // 지도 생성
    var map;
    function initMap(){
      map = new Tmapv2.Map("map_div", {
				center : new Tmapv2.LatLng(37.88728485257855, 127.73813767661932),
				zoom : 15,
				zoomControl: false,
				scrollwheel: true
			});
    }

    var resp;
    $.ajax({
      url : "map_data.json",
      type : "GET",
      dataType : "json",
      success: function(response){
        resp = response.trip_data;

        tripList(resp);
      }
    });

    // 여행지 리스트
    function tripList(trip_data){
      for(var i=0; i<trip_data.length; i++){
        var data = trip_data[i];
        $("#list").append("<hr><div class='container_list_el'>" +
                            "<img src='" + data.image + "'>" +
                            "<div class='container_list_el_name'>" +
                              "<span class='container_list_el_name_check'>" +
                                "<input type='checkbox' name='btn" + i + "' onclick='setMarker("+ i +")'>" +
                              "</span>" +
                              "<span>" + data.spot + "</span>" +
                              "<p>" + data.description + "</p>" +
                            "</div>" +
                          "</div>");
      }
    }

    // 마커 생성
    var markers = [];
    function setMarker(s){
      var check = $("input:checkbox[name='btn" + s + "']").is(":checked");
      var data = resp[s];
      var lonlat = new Tmapv2.LatLng(data.y, data.x);
      var title = data.spot;

      if(check){
        var marker = new Tmapv2.Marker({
					position : lonlat,
					icon : "http://tmapapi.sktelecom.com/upload/tmap/marker/pin_b_m_p.png",
					map : map,
					title : title
				});
        markers[s] = marker;
        //markers[s]._marker_data.options.title
      }
      else{
        markers[s].setMap(null);
      }
    }
  </script>
</head>
<body onload="initMap()">
  <header>
    <div class="wrapper">
      <h1> LOGO </h1>
      <!--<img src="LOGO.png" width="5%", height="5%"> -->
      <ul class="menu">
        <li><a href="#">이달의 추천 여행지</a></li>
        <li><a href="#">나의 루트</a></li>
      </ul>
    </div>
  </header>
  <section>
    <div class="container">
      <div class="container_title">
        <span><span id="container_area">(선택한 여행지)</span>의 추천 관광지를 찾아봤어요</span>
        <input type="button" value="경로 찾기">
      </div>
      <div class="container_box">
        <!-- 여행지 list -->
        <div class="container_list" id="list"></div>
        <!-- 지도 -->
        <div class="container_map">
          <div id="map_div"></div>
        </div>
      </div>
    </div>
  </section>
  <footer>
    <div class="footer">
        <div>
        <p>copyright</p>
        </div>
    </div>
</footer>
</body>
</html>